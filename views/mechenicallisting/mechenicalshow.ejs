<% layout("/layouts/boilerplat") %>
<body>
    
  <div class="faculty-card">
    <h2 class="faculty-name"><%= mechenicaldata.owner.username %></h2>
    <h2 class="faculty-name"><%= mechenicaldata.name %></h2>
    <h3 class="faculty-title"><%= mechenicaldata.designation %></h3>

    <!-- Profile Image -->
    <img src="<%= mechenicaldata.image.url %>" alt="Profile Picture" class="faculty-image" />

    <!-- Experience -->
    <p class="faculty-info">
        <strong>Academic Experience:</strong> <%= mechenicaldata.experience.academics %> years
    </p>
    <p class="faculty-info">
        <strong>Industry Experience:</strong> <%= mechenicaldata.experience.industry %> years
    </p>

    <!-- Qualifications -->
    <p class="faculty-info"><strong>Qualifications:</strong></p>
    <ul class="faculty-list">
        <% mechenicaldata.qualification.forEach(function(q) { %>
            <li><%= q %></li>
        <% }); %>
    </ul>

    <!-- Emails -->
    <p class="faculty-info"><strong>Emails:</strong></p>
    <ul class="email-list faculty-list">
      <% 
        let emails = mechenicaldata.contact.emails; 
        if (typeof emails === 'string') {
          emails = emails.split(',');
        }
        emails.forEach(function(email) { 
      %>
        <li><a href="mailto:<%= email.trim() %>" class="contact-link"><%= email.trim() %></a></li>
      <% }); %>
    </ul>

    <!-- WhatsApp Contact -->
    <p class="faculty-info">
        <strong>WhatsApp:</strong> 
        <a href="https://wa.me/<%= mechenicaldata.contact.whatsapp %>" target="_blank" class="contact-link whatsapp-contact">
            <%= mechenicaldata.contact.whatsapp %>
        </a>
    </p>

    <!-- Subjects Taught -->
    <p class="faculty-info"><strong>Subjects Taught:</strong></p>
    <ul class="faculty-list">
      <% if (mechenicaldata.subjects && mechenicaldata.subjects.length > 0) { %>
        <% mechenicaldata.subjects.forEach(function(subject) { %>
          <li><%= subject %></li>
        <% }); %>
      <% } else { %>
        <li>No subjects listed.</li>
      <% } %>
    </ul>
    
    <% if (currentUser && currentUser._id.toString() === "67ff31a54b2d29d2457265b1") { %>

      <div>
        <!-- Action Buttons -->
        <a href="/mechenicallisting/<%= mechenicaldata._id %>/edit" class="action-link">EDIT</a>

        <form method="post" action="/mechenicallisting/<%= mechenicaldata._id %>?_method=DELETE" class="delete-form" style="display:inline;">
            <button type="submit">DELETE</button></div>
        </form>
      </div>
    
    <% } %>

</body>
